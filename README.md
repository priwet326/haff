# Реализация алгоритма сжатия методом Хаффмена

## Описание
Программа реализует алгоритм сжатия данных методом Хаффмена, включая кодирование, декодирование и расчет энтропии файлов.

## Сборка и установка

### Требования
- Компилятор C++17 (g++ или clang++)
- Утилита `make` (установите если не установлена)

### Компиляция
```bash
make
```
Скомпилированный файл будет иметь имя `haffmen`

## Использование

### Кодирование файла
```bash
./haffmen file_name.file_format
```
**Результат:** `encode_file_name.bin`

### Декодирование файла
```bash
./haffmen -d encode_file_name.bin
```
**Результат:** `decode_file_name`

### Восстановление исходного формата файла
После декодирования необходимо:
1. Проверить формат файла:
   ```bash
   file decode_file_name
   ```
2. Из вывода взять формат файла `file_format`
3. Переименовать файл:
   ```bash
   mv decode_file_name decode_file_name.format_file
   ```

### Расчет энтропии файла
```bash
./haffmen -e file_name
```
Выводит информацию об энтропии файла и теоретическом пределе сжатия.

## Флаги программы

| Флаг | Описание | Пример использования |
|------|----------|---------------------|
| (нет) | Кодирование файла | `./haffmen document.txt` |
| `-d` | Декодирование файла | `./haffmen -d encode_document.bin` |
| `-e` | Расчет энтропии файла | `./haffmen -e document.txt` |

## Примеры использования

1. **Расчет энтропии:**
   ```bash
   ./haffmen -e document.txt
   ```

2. **Кодирование:**
   ```bash
   ./haffmen document.txt
   ```
   Создает файл: `encode_document.bin`

3. **Декодирование:**
   ```bash
   ./haffmen -d encode_document.bin
   ```
   Создает файл: `decode_document`

4. **Восстановление формата:**
   ```bash
   file decode_document
   # Предположим вывод: "decode_document: ASCII text"
   mv decode_document decode_document.txt
   ```

## Дополнительные команды make

```bash
make clean      # Удалить исполняемый файл и созданные encode/decode файлы
make rebuild    # Пересобрать программу
make help       # Показать справку по использованию
```

## Формат выходных файлов

### Закодированный файл (encode_*.bin)
Содержит:
- Размер дерева Хаффмена (32 бита)
- Сериализованное дерево Хаффмена
- Размер закодированных данных (32 бита)
- Данные, закодированные методом Хаффмена

### Восстановленный файл (decode_*)
Содержит исходные данные в бинарном виде. Для правильной работы необходимо добавить исходное расширение файла.

## Особенности реализации

- Поддерживает любые типы файлов (текстовые, бинарные, изображения и т.д.)
- Автоматически генерирует уникальные имена выходных файлов
- Выводит подробную статистику сжатия
- Показывает энтропию файлов и эффективность сжатия
- Защищена от перезаписи существующих файлов

## Формат вывода энтропии

При использовании флага `-e` программа выводит:
- Размер файла в удобочитаемом формате
- Энтропию в битах на символ
- Минимальный теоретический размер после сжатия

Пример вывода:
```
Файл: document.txt
Размер: 1500 Б (1500 байт)
Энтропия: 4.500 бит/символ
Минимальный теоретический размер: 844 Б (844 байт)
```
